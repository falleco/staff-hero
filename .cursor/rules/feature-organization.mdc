---
description: Feature module organization and structure patterns
globs: ["**/features/**"]
alwaysApply: false
---

# Feature Organization Patterns

## ğŸ“ Feature Module Structure

Each feature MUST follow this structure:

```
features/my-feature/
â”œâ”€â”€ components/          # Feature-specific components
â”‚   â””â”€â”€ my-component.tsx
â”œâ”€â”€ hooks/              # Feature-specific hooks
â”‚   â””â”€â”€ use-my-hook.ts
â”œâ”€â”€ api/                # API methods (if needed)
â”‚   â””â”€â”€ my-api.ts
â”œâ”€â”€ types/              # TypeScript types
â”‚   â””â”€â”€ my-types.ts
â”œâ”€â”€ utils/              # Feature-specific utilities
â”‚   â””â”€â”€ my-utils.ts
â”œâ”€â”€ store.ts            # Zustand store (if needed)
â”œâ”€â”€ index.ts            # Public API exports
â””â”€â”€ README.md           # Feature documentation
```

## ğŸ¯ Public API Pattern (index.ts)

### âœ… ALWAYS export through index.ts:

```typescript
// features/my-feature/index.ts

// Export components
export { MyComponent } from './components/my-component';
export { MyScreen } from './components/my-screen';

// Export hooks
export { useMyData } from './hooks/use-my-data';
export { useMyFeature } from './hooks/use-my-feature';

// Export types
export type { MyData, MyConfig } from './types/my-types';

// Export store (if applicable)
export { useMyStore } from './store';
```

### âœ… Usage in other parts of the app:

```typescript
// âœ… CORRECT - import from feature's public API
import { MyComponent, useMyData, type MyData } from '~/features/my-feature';

// âŒ WRONG - never import from internal paths
import { MyComponent } from '~/features/my-feature/components/my-component';
```

## ğŸ“ README Requirements

Every feature MUST have a README.md with:

```markdown
# ğŸ¯ Feature Name

Brief description of what this feature does.

## Usage

\`\`\`typescript
// Example usage code
import { MyComponent } from '~/features/my-feature';

function App() {
  return <MyComponent />;
}
\`\`\`

## Structure

- List of main files and their purpose

## Features

- List of key features
```

## ğŸ”„ Feature Dependencies

### âœ… Features can depend on:
- âœ… Shared components from `~/components/`
- âœ… Design system components from `~/components/nativewindui/`
- âœ… Other features via their public API (`index.ts`)
- âœ… Shared utilities from `~/lib/`
- âœ… Global providers

### âŒ Features should NOT:
- âŒ Import from internal paths of other features
- âŒ Have circular dependencies
- âŒ Duplicate code (use shared utilities)

## ğŸ¯ Examples

### Feature with Store:

```
features/auth/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ auth-sync-provider.tsx
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ use-sync-sophon-token.ts
â”œâ”€â”€ store.ts                    â† Zustand store
â”œâ”€â”€ index.ts                    â† Export store + hooks
â””â”€â”€ README.md
```

### Feature with API:

```
features/profile/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ profile-api.ts          â† API methods
â”œâ”€â”€ components/
â”‚   â””â”€â”€ profile-screen.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ use-profile.ts          â† React Query hook
â”‚   â””â”€â”€ use-profile-screen.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ profile.types.ts
â”œâ”€â”€ index.ts
â””â”€â”€ README.md
```

## ğŸš« NEVER DO:

- âŒ Export everything from a feature (be selective)
- âŒ Skip index.ts (it's your public API contract)
- âŒ Import from other features' internal paths
- âŒ Create features without README
- âŒ Mix shared components with feature components

## âœ… ALWAYS DO:

- âœ… Create index.ts for every feature
- âœ… Document usage in README.md
- âœ… Keep feature-specific code inside feature folder
- âœ… Use public API pattern for imports
- âœ… Follow the folder structure consistently

**Feature modules are self-contained and well-documented!**
