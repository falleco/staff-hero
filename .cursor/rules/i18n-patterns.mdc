---
description: Internationalization (i18n) patterns - all user-facing text must be translated
globs: ["**/*.tsx", "**/*.ts"]
alwaysApply: true
---

# Internationalization (i18n) Patterns

## âš ï¸ CRITICAL RULE: ALL user-facing text MUST be translated!

## ğŸŒ Using Translations

### âœ… ALWAYS use useTranslation hook:

```tsx
import { useTranslation } from '~/features/i18n';

function MyComponent() {
  const { t } = useTranslation();
  
  return (
    <View>
      <Text>{t('app.welcome')}</Text>              {/* âœ… Translated */}
      <Button>{t('app.save')}</Button>             {/* âœ… Translated */}
      <Text>{t('errors.network')}</Text>           {/* âœ… Translated */}
    </View>
  );
}
```

### âŒ NEVER hardcode user-facing text:

```tsx
// âŒ WRONG - hardcoded text
<Text>Welcome</Text>
<Button>Save</Button>
<Text>Network error</Text>

// âŒ WRONG - English-only
const errorMessage = "Something went wrong";

// âŒ WRONG - hardcoded labels
<TextInput placeholder="Enter your email" />
```

## ğŸ”¢ Pluralization

### âœ… Use tp() for plurals:

```tsx
const { t, tp } = useTranslation();

// âœ… CORRECT - handles plurals
<Text>{tp('plurals.item', itemCount)}</Text>
// â†’ "No items", "One item", "5 items"

<Text>{tp('plurals.notification', notifCount)}</Text>
// â†’ "No notifications", "One notification", "3 notifications"
```

## ğŸ“ Translation Key Structure

Keys are organized by domain in `features/i18n/locales/en/common.json`:

```json
{
  "app": { ... },           // Common app strings
  "navigation": { ... },    // Navigation labels
  "auth": { ... },          // Authentication
  "profile": { ... },       // Profile feature
  "card": { ... },          // Card feature
  "send": { ... },          // Send feature
  "settings": { ... },      // Settings
  "errors": { ... },        // Error messages
  "success": { ... },       // Success messages
  "validation": { ... },    // Validation messages
  "time": { ... },          // Time-related
  "plurals": { ... }        // Plural forms
}
```

## ğŸ¯ Adding New Translations

### Step 1: Add to common.json

```json
// features/i18n/locales/en/common.json
{
  "myFeature": {
    "title": "My Feature",
    "description": "Feature description",
    "action": "Do Something",
    "success": "Action completed",
    "error": "Action failed"
  }
}
```

### Step 2: Use in component

```tsx
import { useTranslation } from '~/features/i18n';

function MyFeatureScreen() {
  const { t } = useTranslation();
  
  return (
    <>
      <Text variant="title1">{t('myFeature.title')}</Text>
      <Text variant="body">{t('myFeature.description')}</Text>
      <Button>{t('myFeature.action')}</Button>
    </>
  );
}
```

## ğŸ”„ Dynamic Values (Interpolation)

### âœ… Use placeholders:

```json
// common.json
{
  "greeting": "Hello, %{name}!",
  "balance": "Your balance: %{amount} SOPH",
  "validation": {
    "minLength": "Must be at least %{min} characters"
  }
}
```

```tsx
// Component
const { t } = useTranslation();

<Text>{t('greeting', { name: userName })}</Text>
<Text>{t('balance', { amount: balance })}</Text>
<Text>{t('validation.minLength', { min: 8 })}</Text>
```

## ğŸ¯ Common Patterns

### Screen Titles:

```tsx
// app/(tabs)/profile/index.tsx
import { useTranslation } from '~/features/i18n';

export default function ProfilePage() {
  const { t } = useTranslation();
  
  return (
    <>
      <Stack.Screen options={{ title: t('navigation.profile') }} />
      <ProfileScreen />
    </>
  );
}
```

### Form Labels:

```tsx
const { t } = useTranslation();

<TextInput
  placeholder={t('auth.email')}
  label={t('auth.email')}
/>
```

### Error Messages:

```tsx
const { t } = useTranslation();

try {
  await sendTransaction();
  alert(t('success.sent'));
} catch (error) {
  alert(t('errors.network'));
}
```

### Button Labels:

```tsx
const { t } = useTranslation();

<Button>{t('app.save')}</Button>
<Button>{t('app.cancel')}</Button>
<Button>{t('send.sendMoney')}</Button>
```

## ğŸš« NEVER DO:

- âŒ Hardcode user-facing text in components
- âŒ Use English strings directly
- âŒ Skip translations for labels, buttons, messages
- âŒ Hardcode error messages
- âŒ Use hardcoded placeholders in inputs
- âŒ Forget to add keys to common.json

## âœ… ALWAYS DO:

- âœ… Import useTranslation from '~/features/i18n'
- âœ… Use t() for all user-facing text
- âœ… Use tp() for plurals
- âœ… Add new keys to common.json
- âœ… Group keys by feature/domain
- âœ… Use placeholders for dynamic values
- âœ… Translate screen titles
- âœ… Translate all UI labels

## ğŸ¯ Quick Reference

```tsx
// Import
import { useTranslation } from '~/features/i18n';

// In component
const { t, tp } = useTranslation();

// Usage
t('app.welcome')                           // Simple text
t('greeting', { name: 'John' })            // With variables
tp('plurals.item', count)                  // Plurals
t('navigation.home')                       // Navigation
t('errors.network')                        // Errors
t('success.saved')                         // Success messages
```

## ğŸ“‹ Exceptions (when hardcoding is OK):

- âœ… Developer-only debug messages: `console.log('Debug info')`
- âœ… Technical error logs: `console.error('API call failed')`
- âœ… Constants/enum values: `const STATUS = 'active'`
- âœ… Technical identifiers: `queryKey: ['users']`

**EVERYTHING the user sees MUST be translated - NO EXCEPTIONS!**
